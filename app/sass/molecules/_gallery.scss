.gallery {
    display: grid;
    grid-gap: rem(16);
    grid-template-columns: repeat(2, minmax(rem(120), 1fr));
    grid-auto-rows: calc(50vw - #{rem(32)});
    padding: $gallery-pad-sm;
    justify-items: center;
    align-items: center;
    &__project {
        display: flex; // Fallback
        @extend %align-center;
        @include size(100%);
        position: relative;
        @extend %anim-long;
        border-radius: $b-radius;
        &:hover > & {
            &__image {
                @include transform(translateY(-#{rem(16)}));
                &--blur {
                    width: 80%;
                    @include transition($transition-default);
                    @include transform(translateY(rem(0)));
                    @include blur(rem(16));
                    opacity: .5;
                }
            }
        }
        & > a { @extend %pos-wrap; }
        &__image {
            @extend %pos-wrap;
            @extend %anim-long;
            border-radius: $b-radius;
            pointer-events: none;
            @include box-border(rem(1));
            overflow: hidden;
            & > img {
                @extend %pos-wrap;
                @include size(100%);
            }
            &--blur {
                @include size(100%, 88%);
                @include transform(translateY(0));
                @include blur(0);
                top: auto;
                opacity: .2;
            }
        }
        &__overlay {

        }
        &--hidden{
            opacity: 0;
            background: none;;
            display: none;
        }
    }   
}

@include bp-x-sm {
    .gallery {
        padding: #{$header-h-sm / 2} rem(32);
    }
}

@include bp-sm {
    .gallery {
        grid-template-columns: repeat(3, minmax(rem(120), 1fr));
        grid-auto-rows: calc(33.333vw - #{rem(40)});
        padding: #{$header-h-md / 2} rem(24);
    }
}

@include bp-md {
    .gallery {
        grid-template-columns: 
            $gallery-pad-lg + rem(24)
            repeat($project-number, calc(#{$project-size-lg}))
            $gallery-pad-lg + rem(24)
        ;
        grid-template-rows: repeat(2, 1fr);
        grid-auto-flow: column;
        grid-auto-rows: auto;
        // grid-template-columns: repeat(auto-fill, calc(50vh - #{($header-h-lg) - rem(64)}));
        grid-auto-columns: calc(#{$project-size-lg});
        // padding: 0 $gallery-pad-lg;
        padding: 0;
        height: 100%;
        &__project {
            &__image { @include box-border(rem(2)); }
            &--hidden{
                display: flex; // Fallback
                display: grid;
            }
        }
    }
}

@include bp-lg {
    .gallery {
        grid-template-columns: 
            $gallery-pad-lg + rem(40)
            repeat($project-number, calc(#{$project-size-x-lg}))
            $gallery-pad-lg + rem(40)
        ;
        grid-auto-columns: calc(#{$project-size-x-lg});
    }
}

@include desktop-hd {
    .gallery {
        grid-template-columns: 
            $gallery-pad-x-lg + rem(40)
            repeat($project-number, calc(#{$project-size-x-lg}))
            $gallery-pad-x-lg + rem(40)
        ;
    }
}

@include ultra-wide {
    .gallery {
        grid-template-columns: 
            $gallery-pad-x-lg + rem(64)
            repeat($project-number, calc(#{$project-size-x-lg}))
            $gallery-pad-x-lg + rem(64)
        ;
    }
}